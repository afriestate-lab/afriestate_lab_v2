{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pnh/Documents/Py/afriestate_lab_v2/src/lib/helpers.ts"],"sourcesContent":["// Web-specific helper functions for the Afri Estate app\r\nimport { supabase } from './supabase'\r\n\r\nexport interface TenantUser {\r\n  id: string\r\n  full_name: string\r\n  email: string\r\n  phone_number: string | null\r\n  auth_user_id: string\r\n  status: string\r\n  preferred_language: string\r\n  created_at: string\r\n}\r\n\r\nexport interface CurrentLease {\r\n  id: string\r\n  property_name: string\r\n  room_number: string\r\n  rent_amount: number\r\n  move_in_date: string\r\n  move_out_date?: string\r\n  next_due_date?: string\r\n  property_id: string\r\n}\r\n\r\nexport interface TenantPayment {\r\n  id: string\r\n  amount: number\r\n  payment_date: string\r\n  payment_methods: string[]\r\n  property_name: string\r\n  room_number: string\r\n  receipt_number?: string\r\n  status: string\r\n  created_at: string\r\n}\r\n\r\nexport interface TenantMessage {\r\n  id: string\r\n  subject: string\r\n  message: string\r\n  message_type: string\r\n  status: string\r\n  is_urgent: boolean\r\n  landlord_reply?: string\r\n  replied_at?: string\r\n  created_at: string\r\n  property_name: string\r\n}\r\n\r\nexport interface TenantBooking {\r\n  id: string\r\n  property_name: string\r\n  room_number?: string\r\n  booking_type: string\r\n  status: string\r\n  preferred_move_in_date?: string\r\n  created_at: string\r\n  landlord_response?: string\r\n}\r\n\r\nexport interface PropertyAnnouncement {\r\n  id: string\r\n  title: string\r\n  content: string\r\n  announcement_type: string\r\n  priority: string\r\n  property_name: string\r\n  created_at: string\r\n  expires_at?: string\r\n}\r\n\r\nexport interface ExtensionRequest {\r\n  id: string\r\n  current_end_date: string\r\n  requested_end_date: string\r\n  extension_months: number\r\n  total_amount: number\r\n  payment_status: string\r\n  approval_status: string\r\n  created_at: string\r\n}\r\n\r\n// Check if current user is a tenant\r\nexport const checkTenantRole = async (): Promise<TenantUser | null> => {\r\n  try {\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n    if (!user) return null\r\n\r\n    // First check if user has tenant role in users table\r\n    const { data: userData } = await supabase\r\n      .from('users')\r\n      .select('*')\r\n      .eq('id', user.id)\r\n      .eq('role', 'tenant')\r\n      .single()\r\n\r\n    if (userData) {\r\n      // Get tenant_users data linked to this auth user\r\n      const { data: tenantUser } = await supabase\r\n        .from('tenant_users')\r\n        .select('*')\r\n        .eq('tenant_user_id', user.id)\r\n        .single()\r\n\r\n      return tenantUser || null\r\n    }\r\n\r\n    // If not in users table with tenant role, check tenant_users directly\r\n    const { data: tenantUser } = await supabase\r\n      .from('tenant_users')\r\n      .select('*')\r\n      .eq('auth_user_id', user.id)\r\n      .single()\r\n\r\n    return tenantUser || null\r\n  } catch (error) {\r\n    console.error('Error checking tenant role:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n// Get tenant's current lease information\r\nexport const getCurrentLease = async (tenantUserId: string): Promise<CurrentLease | null> => {\r\n  try {\r\n    // First get the tenant record linked to this tenant_user\r\n    const { data: tenant } = await supabase\r\n      .from('tenants')\r\n      .select('id')\r\n      .eq('tenant_user_id', tenantUserId)\r\n      .single()\r\n\r\n    if (!tenant) return null\r\n\r\n    // Get current active lease\r\n    const { data: leaseData } = await supabase\r\n      .from('room_tenants')\r\n      .select(`\r\n        id,\r\n        rent_amount,\r\n        move_in_date,\r\n        move_out_date,\r\n        next_due_date,\r\n        rooms!inner (\r\n          room_number,\r\n          properties!inner (\r\n            id,\r\n            name\r\n          )\r\n        )\r\n      `)\r\n      .eq('tenant_id', tenant.id)\r\n      .eq('is_active', true)\r\n      .single()\r\n\r\n    if (!leaseData) return null\r\n\r\n    return {\r\n      id: leaseData.id,\r\n      property_name: (leaseData.rooms as any).properties.name,\r\n      room_number: (leaseData.rooms as any).room_number,\r\n      rent_amount: leaseData.rent_amount,\r\n      move_in_date: leaseData.move_in_date,\r\n      move_out_date: leaseData.move_out_date,\r\n      next_due_date: leaseData.next_due_date,\r\n      property_id: (leaseData.rooms as any).properties.id\r\n    }\r\n  } catch (error) {\r\n    console.error('Error getting current lease:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n// Format currency for Rwanda\r\nexport const formatCurrency = (amount: number): string => {\r\n  return new Intl.NumberFormat('en-RW', {\r\n    style: 'currency',\r\n    currency: 'RWF',\r\n    minimumFractionDigits: 0\r\n  }).format(amount)\r\n}\r\n\r\n// Format date for display\r\nexport const formatDate = (dateString: string): string => {\r\n  return new Date(dateString).toLocaleDateString('en-RW', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric'\r\n  })\r\n}\r\n\r\n// Format date for display in Kinyarwanda format\r\nexport const formatDateKinyarwanda = (dateString: string): string => {\r\n  const date = new Date(dateString)\r\n  const months = [\r\n    'Mutarama', 'Gashyantare', 'Werurwe', 'Mata', 'Gicuransi', 'Kamena',\r\n    'Nyakanga', 'Kanama', 'Nzeli', 'Ukwakira', 'Ugushyingo', 'Ukuboza'\r\n  ]\r\n  \r\n  return `${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}`\r\n}\r\n\r\n// Get status badge color\r\nexport const getStatusColor = (status: string): string => {\r\n  switch (status.toLowerCase()) {\r\n    case 'confirmed':\r\n    case 'approved':\r\n    case 'paid':\r\n    case 'completed':\r\n      return '#10b981' // green\r\n    case 'pending':\r\n      return '#f59e0b' // yellow\r\n    case 'rejected':\r\n    case 'failed':\r\n    case 'cancelled':\r\n      return '#ef4444' // red\r\n    default:\r\n      return '#6b7280' // gray\r\n  }\r\n}\r\n\r\n// Get priority color\r\nexport const getPriorityColor = (priority: string): string => {\r\n  switch (priority.toLowerCase()) {\r\n    case 'urgent':\r\n      return '#ef4444' // red\r\n    case 'high':\r\n      return '#f97316' // orange\r\n    case 'normal':\r\n      return '#3b82f6' // blue\r\n    case 'low':\r\n      return '#6b7280' // gray\r\n    default:\r\n      return '#6b7280' // gray\r\n  }\r\n}\r\n\r\n// Get message type display text\r\nexport const getMessageTypeText = (type: string): string => {\r\n  const messageTypes: { [key: string]: string } = {\r\n    'general': 'Rusange',\r\n    'complaint': 'Ikirego',\r\n    'maintenance': 'Gukora',\r\n    'payment': 'Kwishyura',\r\n    'inquiry': 'Gusobanuza'\r\n  }\r\n  return messageTypes[type] || type\r\n}\r\n\r\n// Calculate days until next due date\r\nexport const getDaysUntilDue = (dueDateString: string): number => {\r\n  const dueDate = new Date(dueDateString)\r\n  const today = new Date()\r\n  const diffTime = dueDate.getTime() - today.getTime()\r\n  return Math.ceil(diffTime / (1000 * 60 * 60 * 24))\r\n}\r\n\r\n// Check if date is overdue\r\nexport const isOverdue = (dueDateString: string): boolean => {\r\n  return getDaysUntilDue(dueDateString) < 0\r\n}\r\n\r\n// Format percentage with proper sign\r\nexport const formatPercentage = (percentage: number): string => {\r\n  const sign = percentage >= 0 ? '+' : ''\r\n  return `${sign}${percentage.toFixed(1)}%`\r\n}\r\n\r\n// Format large numbers (e.g., for revenue display)\r\nexport const formatLargeNumber = (num: number): string => {\r\n  if (num >= 1000000) {\r\n    return `${(num / 1000000).toFixed(1)}M`\r\n  } else if (num >= 1000) {\r\n    return `${(num / 1000).toFixed(1)}K`\r\n  }\r\n  return num.toString()\r\n}\r\n\r\n// Get month name in Kinyarwanda\r\nexport const getKinyarwandaMonth = (monthIndex: number): string => {\r\n  const months = [\r\n    'Mutarama', 'Gashyantare', 'Werurwe', 'Mata', 'Gicuransi', 'Kamena',\r\n    'Nyakanga', 'Kanama', 'Nzeli', 'Ukwakira', 'Ugushyingo', 'Ukuboza'\r\n  ]\r\n  return months[monthIndex] || 'Unknown'\r\n}\r\n\r\n// Validate Rwanda phone number\r\nexport const isValidRwandaPhone = (phone: string): boolean => {\r\n  // Remove spaces and special characters\r\n  const cleanPhone = phone.replace(/[\\s\\-\\(\\)]/g, '')\r\n  \r\n  // Check for Rwanda phone patterns\r\n  const patterns = [\r\n    /^(\\+?250)?[0-9]{9}$/, // +250XXXXXXXXX or 250XXXXXXXXX or XXXXXXXXX (9 digits)\r\n    /^0[0-9]{9}$/ // 0XXXXXXXXX (10 digits starting with 0)\r\n  ]\r\n  \r\n  return patterns.some(pattern => pattern.test(cleanPhone))\r\n} \r\n\r\n/**\r\n * Upload image to Supabase Storage and return public URL (Web version)\r\n * @param file - File object from input\r\n * @param bucket - Storage bucket name\r\n * @param path - File path in bucket\r\n * @returns Promise<string> - Public URL of uploaded image\r\n */\r\nexport const uploadImageToStorage = async (\r\n  file: File | Blob,\r\n  bucket: string = 'property-images',\r\n  path?: string\r\n): Promise<string> => {\r\n  try {\r\n    // Validate input\r\n    if (!file) {\r\n      throw new Error('No file provided')\r\n    }\r\n\r\n    // Generate unique filename if path not provided\r\n    const timestamp = Date.now()\r\n    const randomId = Math.random().toString(36).substring(7)\r\n    const filename = path || `property-${timestamp}-${randomId}.jpg`\r\n    \r\n    console.log('Uploading image:', { filename, bucket })\r\n    \r\n    // Check if user is authenticated\r\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n    if (authError || !user) {\r\n      console.error('User authentication failed:', authError)\r\n      throw new Error('User authentication required for image upload')\r\n    }\r\n    \r\n    console.log('User authenticated:', user.id)\r\n    \r\n    // Build per-user object path and upload to Supabase Storage\r\n    const objectPath = `${user.id}/${filename}`\r\n\r\n    const { data, error } = await supabase.storage\r\n      .from(bucket)\r\n      .upload(objectPath, file, {\r\n        contentType: file.type || 'image/jpeg',\r\n        cacheControl: '3600',\r\n        upsert: false\r\n      })\r\n    \r\n    if (error) {\r\n      console.error('Upload error:', error)\r\n      throw new Error(`Failed to upload image: ${error.message}`)\r\n    }\r\n    \r\n    console.log('Upload successful:', data)\r\n    \r\n    // Get public URL\r\n    const { data: urlData } = supabase.storage\r\n      .from(bucket)\r\n      .getPublicUrl(objectPath)\r\n    \r\n    console.log('Public URL:', urlData.publicUrl)\r\n    return urlData.publicUrl\r\n  } catch (error) {\r\n    console.error('Image upload failed:', error)\r\n    throw new Error(`Failed to upload image to storage: ${error instanceof Error ? error.message : 'Unknown error'}`)\r\n  }\r\n}\r\n\r\n/**\r\n * Get a fallback image URL for properties without images\r\n * @returns string - Fallback image URL\r\n */\r\nexport const getFallbackPropertyImage = (): string => {\r\n  return 'https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=400&h=300&fit=crop'\r\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pnh/Documents/Py/afriestate_lab_v2/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-2xl font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 385, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pnh/Documents/Py/afriestate_lab_v2/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YACC,KAAK;YACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAM,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,2KAAgB,OAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,2KAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,oGACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,2KAAgB,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,kDAAkD;QAC/D,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,2KAAgB,QAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;;AAGb,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 529, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pnh/Documents/Py/afriestate_lab_v2/src/components/web-role-guard.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useMemo, useState } from 'react'\r\nimport { usePathname, useRouter } from 'next/navigation'\r\nimport { useAuth } from '@/components/auth-provider'\r\nimport {\r\n  getCurrentUserRole,\r\n  hasRoleAccess,\r\n  redirectToRoleDashboard,\r\n  UserRole\r\n} from '@/lib/roleGuard'\r\n\r\ntype GuardState = 'checking' | 'allowed' | 'redirecting'\r\n\r\ninterface RoleGuardProps {\r\n  allowedRoles: UserRole[]\r\n  screenName: string\r\n  children: React.ReactNode\r\n  fallback?: React.ReactNode\r\n}\r\n\r\nexport default function WebRoleGuard({\r\n  allowedRoles,\r\n  screenName,\r\n  children,\r\n  fallback\r\n}: RoleGuardProps) {\r\n  const router = useRouter()\r\n  const pathname = usePathname()\r\n  const { user, loading: authLoading } = useAuth()\r\n\r\n  const [state, setState] = useState<GuardState>('checking')\r\n  const [errorMessage, setErrorMessage] = useState<string | null>(null)\r\n\r\n  const redirectToLogin = useMemo(() => {\r\n    const redirectUrl = pathname || '/'\r\n    return `/auth/sign-in?redirect=${encodeURIComponent(redirectUrl)}`\r\n  }, [pathname])\r\n\r\n  useEffect(() => {\r\n    let isMounted = true\r\n\r\n    const validateAccess = async () => {\r\n      if (authLoading) return\r\n\r\n      if (!user) {\r\n        setState('redirecting')\r\n        router.replace(redirectToLogin)\r\n        return\r\n      }\r\n\r\n      try {\r\n        const role = await getCurrentUserRole()\r\n\r\n        if (!isMounted) return\r\n\r\n        const roleAllowed = allowedRoles.includes(role)\r\n        const screenAllowed = hasRoleAccess(role, screenName)\r\n\r\n        if (!roleAllowed || !screenAllowed) {\r\n          const redirectPath = redirectToRoleDashboard(role)\r\n          setState('redirecting')\r\n\r\n          if (redirectPath) {\r\n            router.replace(redirectPath)\r\n          } else {\r\n            setErrorMessage('You do not have permission to view this page.')\r\n            router.replace('/')\r\n          }\r\n          return\r\n        }\r\n\r\n        setState('allowed')\r\n      } catch (error) {\r\n        console.error('[RoleGuard] Error validating access', error)\r\n        if (!isMounted) return\r\n        setErrorMessage('Unable to verify your access permissions. Please try again.')\r\n        setState('redirecting')\r\n        router.replace(redirectToLogin)\r\n      }\r\n    }\r\n\r\n    void validateAccess()\r\n\r\n    return () => {\r\n      isMounted = false\r\n    }\r\n  }, [allowedRoles, authLoading, redirectToLogin, router, screenName, user])\r\n\r\n  if (state === 'allowed') {\r\n    return <>{children}</>\r\n  }\r\n\r\n  if (fallback) {\r\n    return <>{fallback}</>\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex min-h-[50vh] flex-col items-center justify-center gap-3 text-center\">\r\n      <div className=\"h-10 w-10 animate-spin rounded-full border-b-2 border-primary\" />\r\n      <p className=\"text-sm text-muted-foreground\">\r\n        {errorMessage ?? 'Checking your access permissions...'}\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAqBe,SAAS,aAAa,EACnC,YAAY,EACZ,UAAU,EACV,QAAQ,EACR,QAAQ,EACO;;IACf,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,EAAE,IAAI,EAAE,SAAS,WAAW,EAAE,GAAG,IAAA,oJAAO;IAE9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAa;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB;IAEhE,MAAM,kBAAkB,IAAA,wKAAO;iDAAC;YAC9B,MAAM,cAAc,YAAY;YAChC,OAAO,CAAC,uBAAuB,EAAE,mBAAmB,cAAc;QACpE;gDAAG;QAAC;KAAS;IAEb,IAAA,0KAAS;kCAAC;YACR,IAAI,YAAY;YAEhB,MAAM;yDAAiB;oBACrB,IAAI,aAAa;oBAEjB,IAAI,CAAC,MAAM;wBACT,SAAS;wBACT,OAAO,OAAO,CAAC;wBACf;oBACF;oBAEA,IAAI;wBACF,MAAM,OAAO,MAAM,IAAA,gJAAkB;wBAErC,IAAI,CAAC,WAAW;wBAEhB,MAAM,cAAc,aAAa,QAAQ,CAAC;wBAC1C,MAAM,gBAAgB,IAAA,2IAAa,EAAC,MAAM;wBAE1C,IAAI,CAAC,eAAe,CAAC,eAAe;4BAClC,MAAM,eAAe,IAAA,qJAAuB,EAAC;4BAC7C,SAAS;4BAET,IAAI,cAAc;gCAChB,OAAO,OAAO,CAAC;4BACjB,OAAO;gCACL,gBAAgB;gCAChB,OAAO,OAAO,CAAC;4BACjB;4BACA;wBACF;wBAEA,SAAS;oBACX,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,uCAAuC;wBACrD,IAAI,CAAC,WAAW;wBAChB,gBAAgB;wBAChB,SAAS;wBACT,OAAO,OAAO,CAAC;oBACjB;gBACF;;YAEA,KAAK;YAEL;0CAAO;oBACL,YAAY;gBACd;;QACF;iCAAG;QAAC;QAAc;QAAa;QAAiB;QAAQ;QAAY;KAAK;IAEzE,IAAI,UAAU,WAAW;QACvB,qBAAO;sBAAG;;IACZ;IAEA,IAAI,UAAU;QACZ,qBAAO;sBAAG;;IACZ;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;;;;;0BACf,6LAAC;gBAAE,WAAU;0BACV,gBAAgB;;;;;;;;;;;;AAIzB;GApFwB;;QAMP,kJAAS;QACP,oJAAW;QACW,oJAAO;;;KARxB","debugId":null}},
    {"offset": {"line": 664, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pnh/Documents/Py/afriestate_lab_v2/app/tenant/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useMemo, useState } from 'react'\r\nimport Image from 'next/image'\r\nimport { useRouter } from 'next/navigation'\r\n\r\nimport { supabase } from '@/lib/supabase'\r\nimport { useAuth } from '@/components/auth-provider'\r\nimport { useLanguage } from '@/lib/languageContext'\r\nimport { formatCurrency, formatDate, getFallbackPropertyImage } from '@/lib/helpers'\r\n\r\nimport { Button } from '@/components/ui/button'\r\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table'\r\nimport RoleGuard from '@/components/web-role-guard'\r\n\r\ninterface TenantProfile {\r\n  id: string\r\n  name: string\r\n  email: string\r\n  phone?: string | null\r\n  status: string\r\n}\r\n\r\ninterface LeaseSummary {\r\n  leaseId: string\r\n  propertyId: string\r\n  propertyName: string\r\n  propertyAddress: string\r\n  propertyCity?: string\r\n  roomNumber: string\r\n  rentAmount: number\r\n  moveInDate?: string\r\n  nextDueDate?: string\r\n  imageUrl?: string\r\n}\r\n\r\ninterface PaymentRecord {\r\n  id: string\r\n  amount: number\r\n  payment_date: string\r\n  status: string\r\n  propertyName: string\r\n  roomNumber: string\r\n}\r\n\r\ninterface AnnouncementSummary {\r\n  id: string\r\n  title: string\r\n  content: string\r\n  priority: string\r\n  created_at: string\r\n  expires_at?: string\r\n  propertyName: string\r\n}\r\n\r\nfunction TenantDashboardContent() {\r\n  const router = useRouter()\r\n  const { user, loading: authLoading } = useAuth()\r\n  const { currentLanguage } = useLanguage()\r\n\r\n  const locale = currentLanguage === 'rw' ? 'rw-RW' : 'en-US'\r\n  const localize = (en: string, rw: string) => (currentLanguage === 'rw' ? rw : en)\r\n\r\n  const [profile, setProfile] = useState<TenantProfile | null>(null)\r\n  const [lease, setLease] = useState<LeaseSummary | null>(null)\r\n  const [payments, setPayments] = useState<PaymentRecord[]>([])\r\n  const [announcements, setAnnouncements] = useState<AnnouncementSummary[]>([])\r\n  const [balance, setBalance] = useState({ due: 0, paid: 0, outstanding: 0 })\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    if (!authLoading) {\r\n      if (!user) {\r\n        router.push('/auth/sign-in')\r\n        return\r\n      }\r\n      void loadDashboard()\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [authLoading, user])\r\n\r\n  const loadDashboard = async () => {\r\n    if (!user) return\r\n    try {\r\n      setLoading(true)\r\n      setError(null)\r\n\r\n      const { data: tenantUserRaw, error: tenantUserError } = await supabase\r\n        .from('tenant_users')\r\n        .select('id, full_name, email, phone_number, status')\r\n        .eq('auth_user_id', user.id)\r\n        .single()\r\n\r\n      if (tenantUserError || !tenantUserRaw) {\r\n        setError(localize('No tenant profile found for this account.', 'Nta profili y\\'umukiriya ibonetse kuri konti yawe.'))\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      const tenantUser = tenantUserRaw as any\r\n      const tenantProfile: TenantProfile = {\r\n        id: tenantUser.id,\r\n        name: tenantUser.full_name || user.email || 'Tenant',\r\n        email: tenantUser.email || user.email || '',\r\n        phone: tenantUser.phone_number || user.user_metadata?.phone_number || null,\r\n        status: tenantUser.status || 'active',\r\n      }\r\n      setProfile(tenantProfile)\r\n\r\n      const { data: tenantDataRaw } = await supabase\r\n        .from('tenants')\r\n        .select('id')\r\n        .eq('tenant_user_id', tenantUser.id)\r\n        .single()\r\n\r\n      const tenantRecord = tenantDataRaw as any\r\n\r\n      if (!tenantRecord?.id) {\r\n        setLease(null)\r\n        setPayments([])\r\n        setAnnouncements([])\r\n        setBalance({ due: 0, paid: 0, outstanding: 0 })\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      const tenantId = tenantRecord.id\r\n\r\n      const { data: leaseRaw } = await supabase\r\n        .from('room_tenants')\r\n        .select(`\r\n          id,\r\n          rent_amount,\r\n          move_in_date,\r\n          next_due_date,\r\n          rooms!inner (\r\n            id,\r\n            room_number,\r\n            properties!inner (\r\n              id,\r\n              name,\r\n              address,\r\n              city,\r\n              featured_image_url,\r\n              property_images\r\n            )\r\n          )\r\n        `)\r\n        .eq('tenant_id', tenantId)\r\n        .eq('is_active', true)\r\n        .single()\r\n\r\n      let leaseSummary: LeaseSummary | null = null\r\n      let propertyId: string | null = null\r\n\r\n      if (leaseRaw) {\r\n        const leaseData = leaseRaw as any\r\n        const property = leaseData.rooms?.properties\r\n        const propertyImages = (property?.property_images || []) as string[]\r\n\r\n        leaseSummary = {\r\n          leaseId: leaseData.id,\r\n          propertyId: property?.id || '',\r\n          propertyName: property?.name || localize('Unknown property', 'Inyubako itazwi'),\r\n          propertyAddress: property?.address || '',\r\n          propertyCity: property?.city || undefined,\r\n          roomNumber: leaseData.rooms?.room_number || '-',\r\n          rentAmount: leaseData.rent_amount || 0,\r\n          moveInDate: leaseData.move_in_date || undefined,\r\n          nextDueDate: leaseData.next_due_date || undefined,\r\n          imageUrl: property?.featured_image_url || propertyImages[0],\r\n        }\r\n        propertyId = property?.id || null\r\n      }\r\n\r\n      setLease(leaseSummary)\r\n\r\n      const { data: paymentsRaw } = await supabase\r\n        .from('payments')\r\n        .select(`\r\n          id,\r\n          amount,\r\n          payment_date,\r\n          payment_status,\r\n          rooms!inner (\r\n            room_number,\r\n            properties!inner (\r\n              id,\r\n              name\r\n            )\r\n          )\r\n        `)\r\n        .eq('tenant_id', tenantId)\r\n        .order('payment_date', { ascending: false })\r\n        .limit(50)\r\n\r\n      const paymentRecords: PaymentRecord[] = (paymentsRaw || []).map((payment: any) => ({\r\n        id: payment.id,\r\n        amount: payment.amount || 0,\r\n        payment_date: payment.payment_date,\r\n        status: payment.payment_status || 'completed',\r\n        propertyName: payment.rooms?.properties?.name || '—',\r\n        roomNumber: payment.rooms?.room_number || '—',\r\n      }))\r\n\r\n      setPayments(paymentRecords)\r\n\r\n      const now = new Date()\r\n      const currentMonthKey = `${now.getFullYear()}-${now.getMonth()}`\r\n      const paidThisMonth = paymentRecords\r\n        .filter((payment) => {\r\n          const paymentDate = new Date(payment.payment_date)\r\n          return `${paymentDate.getFullYear()}-${paymentDate.getMonth()}` === currentMonthKey\r\n        })\r\n        .reduce((sum, payment) => sum + payment.amount, 0)\r\n\r\n      const rentDue = leaseSummary?.rentAmount || 0\r\n      setBalance({\r\n        due: rentDue,\r\n        paid: paidThisMonth,\r\n        outstanding: Math.max(rentDue - paidThisMonth, 0),\r\n      })\r\n\r\n      if (propertyId) {\r\n        const { data: announcementsRaw } = await supabase\r\n          .from('property_announcements')\r\n          .select(`\r\n            id,\r\n            title,\r\n            content,\r\n            announcement_type,\r\n            priority,\r\n            created_at,\r\n            expires_at,\r\n            properties!inner ( name )\r\n          `)\r\n          .eq('property_id', propertyId)\r\n          .eq('is_active', true)\r\n          .order('created_at', { ascending: false })\r\n          .limit(10)\r\n\r\n        const announcementRecords: AnnouncementSummary[] = (announcementsRaw || []).map((item: any) => ({\r\n          id: item.id,\r\n          title: item.title,\r\n          content: item.content,\r\n          priority: item.priority || 'medium',\r\n          created_at: item.created_at,\r\n          expires_at: item.expires_at || undefined,\r\n          propertyName: item.properties?.name || '',\r\n        }))\r\n\r\n        setAnnouncements(announcementRecords)\r\n      } else {\r\n        setAnnouncements([])\r\n      }\r\n    } catch (err) {\r\n      console.error('[TenantDashboard] Unexpected error:', err)\r\n      setError(localize('Failed to load tenant dashboard data.', 'Ntibyakunze kubona amakuru y\\'umukiriya.'))\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const isOverdue = useMemo(() => {\r\n    if (!lease?.nextDueDate) return false\r\n    const dueDate = new Date(lease.nextDueDate)\r\n    const today = new Date()\r\n    dueDate.setHours(0, 0, 0, 0)\r\n    today.setHours(0, 0, 0, 0)\r\n    return dueDate.getTime() < today.getTime() && balance.outstanding > 0\r\n  }, [lease?.nextDueDate, balance.outstanding])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container mx-auto flex min-h-[70vh] items-center justify-center\">\r\n        <div className=\"flex flex-col items-center gap-3 text-center\">\r\n          <div className=\"h-12 w-12 animate-spin rounded-full border-b-2 border-primary\" />\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            {localize('Loading your dashboard...', 'Dashboard yawe iri gutegurwa...')}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-12\">\r\n        <Card className=\"max-w-2xl border-destructive/50 bg-destructive/10 text-destructive\">\r\n          <CardHeader>\r\n            <CardTitle>{localize('Error', 'Ikosa')}</CardTitle>\r\n            <CardDescription>{error}</CardDescription>\r\n          </CardHeader>\r\n          <CardFooter>\r\n            <Button variant=\"outline\" onClick={() => loadDashboard()}>\r\n              {localize('Retry', 'Ongera ugerageze')}\r\n            </Button>\r\n          </CardFooter>\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold\">\r\n            {localize('Welcome back', 'Murakaza neza')} {profile?.name?.split(' ')[0] || ''}\r\n          </h1>\r\n          <p className=\"text-muted-foreground\">\r\n            {localize('Review your lease, payments, and announcements in one place.', 'Reba amasezerano yawe, ubwishyu n\\'amatangazo ahurijwe hamwe.')} \r\n          </p>\r\n        </div>\r\n        {profile?.email ? <p className=\"text-sm text-muted-foreground\">{profile.email}</p> : null}\r\n      </div>\r\n\r\n      <Separator className=\"my-6\" />\r\n\r\n      <div className=\"grid gap-4 md:grid-cols-2 xl:grid-cols-4\">\r\n        <MetricCard\r\n          label={localize('Rent due this month', 'Ubukode bw\\'uku kwezi')}\r\n          value={formatCurrency(balance.due)}\r\n          description={lease?.nextDueDate ? `${localize('Due', 'Bizishyurwa')} ${formatDate(lease.nextDueDate)}` : undefined}\r\n        />\r\n        <MetricCard\r\n          label={localize('Paid this month', 'Byishyuwe uku kwezi')}\r\n          value={formatCurrency(balance.paid)}\r\n          description={localize('Thank you for your payment!', 'Urakoze ku bw\\'ubwishyu bwawe!')}\r\n        />\r\n        <MetricCard\r\n          label={localize('Outstanding balance', 'Umwenda usigaye')}\r\n          value={formatCurrency(balance.outstanding)}\r\n          description={isOverdue ? localize('Payment is overdue', 'Ubwishyu butinze') : localize('Keep your account current', 'Komeza wubahirize ubwishyu')}\r\n          highlight={isOverdue}\r\n        />\r\n        <MetricCard\r\n          label={localize('Move-in date', 'Itariki watujemo')}\r\n          value={lease?.moveInDate ? formatDate(lease.moveInDate) : '—'}\r\n          description={localize('Your current stay start date', 'Itariki watangiye gutura')}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"mt-6 grid gap-6 lg:grid-cols-[2fr_1fr]\">\r\n        <Card>\r\n          <CardHeader className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n            <div>\r\n              <CardTitle>{localize('Your lease', 'Amasezerano yawe')}</CardTitle>\r\n              <CardDescription>\r\n                {localize('Details about your current stay and property.', 'Amakuru ajyanye n\\'aho utura n\\'inyubako yawe.')}\r\n              </CardDescription>\r\n            </div>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => router.push('/payments')}>\r\n              {localize('Pay rent', 'Ishyura ubukode')}\r\n            </Button>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            {lease ? (\r\n              <div className=\"flex flex-col gap-4 sm:flex-row\">\r\n                <div className=\"relative h-40 w-full overflow-hidden rounded-lg sm:w-64\">\r\n                  <Image\r\n                    src={lease.imageUrl || getFallbackPropertyImage()}\r\n                    alt={lease.propertyName}\r\n                    fill\r\n                    className=\"object-cover\"\r\n                    sizes=\"(max-width: 640px) 100vw, 256px\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex-1 space-y-3 text-sm\">\r\n                  <InfoRow\r\n                    label={localize('Property', 'Inyubako')}\r\n                    value={lease.propertyName}\r\n                    helper={lease.propertyAddress}\r\n                  />\r\n                  <InfoRow label={localize('Room', 'Icyumba')} value={lease.roomNumber} />\r\n                  <InfoRow label={localize('Monthly rent', 'Ubukode bw\\'ukwezi')} value={formatCurrency(lease.rentAmount)} />\r\n                  <InfoRow\r\n                    label={localize('Next payment due', 'Itariki yo kwishyura itaha')}\r\n                    value={lease.nextDueDate ? formatDate(lease.nextDueDate) : localize('Not set', 'Ntiteganyijwe')}\r\n                    helper={isOverdue ? localize('Payment overdue', 'Ubwishyu butinze') : undefined}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {localize('No active lease found. Contact support if this is unexpected.', 'Nta masezerano akora abonetse. Vugana n\\'ubuyobozi niba biteye ikibazo.')}\r\n              </p>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>{localize('Quick actions', 'Ibikorwa byihuse')}</CardTitle>\r\n            <CardDescription>\r\n              {localize('Access common tenant requests and support.', 'Geraho serivisi zikoreshwa kenshi n\\'abakiriya.')}\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"flex flex-col gap-3\">\r\n            <Button variant=\"secondary\" onClick={() => router.push('/payments')}>\r\n              {localize('View payment history', 'Reba amateka y\\'ubwishyu')}\r\n            </Button>\r\n            <Button variant=\"secondary\" onClick={() => router.push('/tenant/requests')}>\r\n              {localize('Submit maintenance request', 'Ohereza ubusabe bwo gusana')}\r\n            </Button>\r\n            <Button variant=\"secondary\" onClick={() => router.push('/tenant/extend')}>\r\n              {localize('Request lease extension', 'Saba kongera amasezerano')}\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      <div className=\"mt-6 grid gap-6 xl:grid-cols-[2fr_1fr]\">\r\n        <Card>\r\n          <CardHeader className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n            <div>\r\n              <CardTitle>{localize('Recent payments', 'Ubwishyu buheruka')}</CardTitle>\r\n              <CardDescription>\r\n                {localize('Track your recent rent payments.', 'Kurikirana ubwishyu bwawe bw\\'ubukode.')}\r\n              </CardDescription>\r\n            </div>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => router.push('/payments')}>\r\n              {localize('Manage payments', 'Tunganya ubwishyu')}\r\n            </Button>\r\n          </CardHeader>\r\n          <CardContent className=\"overflow-x-auto\">\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>{localize('Date', 'Itariki')}</TableHead>\r\n                  <TableHead>{localize('Property', 'Inyubako')}</TableHead>\r\n                  <TableHead>{localize('Room', 'Icyumba')}</TableHead>\r\n                  <TableHead>{localize('Amount', 'Umubare')}</TableHead>\r\n                  <TableHead>{localize('Status', 'Imiterere')}</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {payments.length === 0 ? (\r\n                  <TableRow>\r\n                    <TableCell colSpan={5} className=\"py-6 text-center text-muted-foreground\">\r\n                      {localize('No payments recorded yet.', 'Nta bwishyu bwanditswe.')}\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ) : (\r\n                  payments.slice(0, 8).map((payment) => (\r\n                    <TableRow key={payment.id}>\r\n                      <TableCell>{formatDate(payment.payment_date)}</TableCell>\r\n                      <TableCell>{payment.propertyName}</TableCell>\r\n                      <TableCell>{payment.roomNumber}</TableCell>\r\n                      <TableCell>{formatCurrency(payment.amount)}</TableCell>\r\n                      <TableCell className=\"capitalize\">{localize(payment.status, payment.status)}</TableCell>\r\n                    </TableRow>\r\n                  ))\r\n                )}\r\n              </TableBody>\r\n            </Table>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>{localize('Announcements', 'Amatangazo')}</CardTitle>\r\n            <CardDescription>\r\n              {localize('Updates from your property management team.', 'Amakuru atangwa n\\'ubuyobozi bw\\'inyubako.')}\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            {announcements.length === 0 ? (\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {localize('No announcements at the moment.', 'Nta tangazo rihari ubu.')}\r\n              </p>\r\n            ) : (\r\n              announcements.slice(0, 4).map((announcement) => (\r\n                <div key={announcement.id} className=\"rounded-lg border bg-muted/40 px-3 py-3\">\r\n                  <div className=\"flex items-center justify-between text-sm\">\r\n                    <span className=\"font-medium text-foreground\">{announcement.title}</span>\r\n                    <span className=\"text-xs text-muted-foreground\">\r\n                      {announcement.created_at ? formatDate(announcement.created_at) : ''}\r\n                    </span>\r\n                  </div>\r\n                  <p className=\"mt-2 text-xs text-muted-foreground\">{announcement.content}</p>\r\n                  <div className=\"mt-3 flex items-center justify-between text-xs text-muted-foreground\">\r\n                    <span className=\"capitalize\">{announcement.priority}</span>\r\n                    {announcement.expires_at ? (\r\n                      <span>\r\n                        {localize('Expires', 'Irangiye')} {formatDate(announcement.expires_at)}\r\n                      </span>\r\n                    ) : null}\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction MetricCard({ label, value, description, highlight }: { label: string; value: string; description?: string; highlight?: boolean }) {\r\n  return (\r\n    <Card className={highlight ? 'border-destructive/60 bg-destructive/5' : 'border-border/80'}>\r\n      <CardHeader className=\"space-y-1\">\r\n        <CardDescription>{label}</CardDescription>\r\n        <CardTitle className=\"text-3xl font-semibold\">{value}</CardTitle>\r\n      </CardHeader>\r\n      {description ? (\r\n        <CardContent className={`pt-0 text-sm ${highlight ? 'text-destructive' : 'text-muted-foreground'}`}>\r\n          {description}\r\n        </CardContent>\r\n      ) : null}\r\n    </Card>\r\n  )\r\n}\r\n\r\nfunction InfoRow({ label, value, helper }: { label: string; value: string; helper?: string }) {\r\n  return (\r\n    <div>\r\n      <p className=\"text-xs uppercase tracking-wide text-muted-foreground\">{label}</p>\r\n      <p className=\"text-sm font-medium text-foreground\">{value}</p>\r\n      {helper ? <p className=\"text-xs text-muted-foreground\">{helper}</p> : null}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function TenantDashboardPage() {\r\n  return (\r\n    <RoleGuard allowedRoles={['tenant']} screenName=\"tenant-dashboard\">\r\n      <TenantDashboardContent />\r\n    </RoleGuard>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}