{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\r\nimport type { NextRequest } from 'next/server'\r\nimport { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || 'https://sgektsymnqkyqcethveh.supabase.co'\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNnZWt0c3ltbnFreXFjZXRodmVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyNjk2MjEsImV4cCI6MjA2NTg0NTYyMX0.9-GgphRm5dMkmuXmBzu2cORM50qj4bLJdngAqDpjErU'\r\n\r\n// Protected routes that require authentication\r\nconst protectedRoutes = [\r\n  '/tenant',\r\n  '/landlord',\r\n  '/admin',\r\n  '/properties',\r\n  '/tenants',\r\n  '/payments',\r\n  '/reports',\r\n  '/managers',\r\n]\r\n\r\n// Admin-only routes\r\nconst adminRoutes = [\r\n  '/admin',\r\n]\r\n\r\n// Role-based route access\r\nconst roleAccess: Record<string, string[]> = {\r\n  '/tenant': ['tenant'],\r\n  '/landlord': ['landlord', 'manager'],\r\n  '/admin': ['admin'],\r\n  '/properties': ['landlord', 'manager', 'admin'],\r\n  '/tenants': ['landlord', 'manager', 'admin'],\r\n  '/payments': ['landlord', 'manager', 'admin'],\r\n  '/reports': ['landlord', 'manager', 'admin'],\r\n  '/managers': ['landlord', 'admin'],\r\n}\r\n\r\nexport async function middleware(request: NextRequest) {\r\n  const { pathname } = request.nextUrl\r\n\r\n  // Skip middleware for public routes\r\n  if (\r\n    pathname.startsWith('/_next') ||\r\n    pathname.startsWith('/api') ||\r\n    pathname.startsWith('/auth') ||\r\n    pathname === '/' ||\r\n    pathname.startsWith('/privacy')\r\n  ) {\r\n    return NextResponse.next()\r\n  }\r\n\r\n  // Check if route is protected\r\n  const isProtected = protectedRoutes.some(route => pathname.startsWith(route))\r\n  \r\n  if (!isProtected) {\r\n    return NextResponse.next()\r\n  }\r\n\r\n  // Create Supabase client for server-side\r\n  const supabase = createClient(supabaseUrl, supabaseAnonKey, {\r\n    auth: {\r\n      persistSession: false,\r\n      autoRefreshToken: false,\r\n      detectSessionInUrl: false,\r\n    },\r\n  })\r\n\r\n  // Simplified middleware - let client-side handle auth\r\n  // Supabase auth cookies are HTTP-only and require proper setup\r\n  // For now, we'll allow requests and let client-side auth handle protection\r\n  // This is a common pattern for Next.js + Supabase\r\n  return NextResponse.next()\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    /*\r\n     * Match all request paths except for the ones starting with:\r\n     * - _next/static (static files)\r\n     * - _next/image (image optimization files)\r\n     * - favicon.ico (favicon file)\r\n     */\r\n    '/((?!_next/static|_next/image|favicon.ico).*)',\r\n  ],\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAEA;;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,wBAAwB,IAAI;AAC5D,MAAM,kBAAkB,QAAQ,GAAG,CAAC,6BAA6B,IAAI;AAErE,+CAA+C;AAC/C,MAAM,kBAAkB;IACtB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,oBAAoB;AACpB,MAAM,cAAc;IAClB;CACD;AAED,0BAA0B;AAC1B,MAAM,aAAuC;IAC3C,WAAW;QAAC;KAAS;IACrB,aAAa;QAAC;QAAY;KAAU;IACpC,UAAU;QAAC;KAAQ;IACnB,eAAe;QAAC;QAAY;QAAW;KAAQ;IAC/C,YAAY;QAAC;QAAY;QAAW;KAAQ;IAC5C,aAAa;QAAC;QAAY;QAAW;KAAQ;IAC7C,YAAY;QAAC;QAAY;QAAW;KAAQ;IAC5C,aAAa;QAAC;QAAY;KAAQ;AACpC;AAEO,eAAe,WAAW,OAAoB;IACnD,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,oCAAoC;IACpC,IACE,SAAS,UAAU,CAAC,aACpB,SAAS,UAAU,CAAC,WACpB,SAAS,UAAU,CAAC,YACpB,aAAa,OACb,SAAS,UAAU,CAAC,aACpB;QACA,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,8BAA8B;IAC9B,MAAM,cAAc,gBAAgB,IAAI,CAAC,CAAA,QAAS,SAAS,UAAU,CAAC;IAEtE,IAAI,CAAC,aAAa;QAChB,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,yCAAyC;IACzC,MAAM,WAAW,IAAA,+MAAY,EAAC,aAAa,iBAAiB;QAC1D,MAAM;YACJ,gBAAgB;YAChB,kBAAkB;YAClB,oBAAoB;QACtB;IACF;IAEA,sDAAsD;IACtD,+DAA+D;IAC/D,2EAA2E;IAC3E,kDAAkD;IAClD,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;KAKC,GACD;KACD;AACH"}}]
}